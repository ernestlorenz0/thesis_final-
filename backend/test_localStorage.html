<!DOCTYPE html>
<html>
<head>
    <title>Test localStorage for Generated Images</title>
</head>
<body>
    <h1>Test localStorage for Generated Images</h1>
    <button onclick="checkLocalStorage()">Check localStorage</button>
    <button onclick="addTestImage()">Add Test Image</button>
    <button onclick="clearLocalStorage()">Clear localStorage</button>
    <div id="output"></div>

    <script>
        function checkLocalStorage() {
            const images = JSON.parse(localStorage.getItem('kenbilearn_generated_images') || '[]');
            document.getElementById('output').innerHTML = `
                <h3>Found ${images.length} images in localStorage:</h3>
                <pre>${JSON.stringify(images, null, 2)}</pre>
            `;
        }

        function addTestImage() {
            const testImage = {
                url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
                name: 'Test Image',
                prompt: 'test prompt',
                generatedAt: new Date().toISOString()
            };
            
            const existing = JSON.parse(localStorage.getItem('kenbilearn_generated_images') || '[]');
            const updated = [testImage, ...existing];
            localStorage.setItem('kenbilearn_generated_images', JSON.stringify(updated));
            
            alert('Test image added!');
            checkLocalStorage();
        }

        function clearLocalStorage() {
            localStorage.removeItem('kenbilearn_generated_images');
            alert('localStorage cleared!');
            checkLocalStorage();
        }

        // Auto-check on load
        checkLocalStorage();
    </script>
</body>
</html>
